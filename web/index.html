<html>
    <script>
        async function run() {
            const memory = new WebAssembly.Memory({ initial: 1 });

            function print(offset, length) {
                const bytes = new Uint8Array(memory.buffer, offset, length);
                const string = new TextDecoder("utf8").decode(bytes);
                console.log(string);
            }

            const importObject = {
                "js": { 
                    "mem": memory,
                    "print": print 
                },
            };

            let obj = await WebAssembly.instantiateStreaming(fetch("hello.wasm"), importObject);
            obj.instance.exports.hello();
        }

        run();
    </script>
    <body>
        <h1>Wasm hello world!</h1>
    </body>
</html>